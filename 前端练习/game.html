<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>game 1</title>
    <style media="screen">
        canvas {
            border: 1px black solid;
        }

    </style>
</head>
<body>
    <canvas id="id-canvas" width="800" height="600"></canvas>
<script>
    var log = console.log.bind(console)

    var imageFromPath = function (path) {
        var img = new Image()
        img.src = path
        return img
    }
    var Paddle = function () {
        var image =  imageFromPath('paddle.png')
        var o = {
            img: image,
            
        }
        return o 
    }
    
    var __main = function () {

        var fps = 60
        var canvas = document.querySelector('#id-canvas')
        var context = canvas.getContext('2d')

        var x = 300
        var y = 450

        var img = new Image()
//        log('img', img)
        img.src = 'paddle.png'
        context.drawImage(img, x, y)

        //events
        var leftDown = false
        var rightDown = false
        var speed = 5
        window.addEventListener('keydown', function (event) {
            log('keydown')
            var k = event.key
//        log(event)
            if (k == 'a') {
                leftDown = true
            } else if (k == 'd') {
                rightDown = true
            }
        })

        window.addEventListener('keyup', function (event) {
            log('keyup')
            var k = event.key
//        log(event)
            if (k == 'a') {
                leftDown = false
            } else if (k == 'd') {
                rightDown = false
            }
        })

        setInterval(function (fps) {
            //update x and y
            if(leftDown) {
                x -= speed
            }else if (rightDown) {
                x += speed
            }

            //clamp x
            if(x < 0) {
                x = 0
            }else if(x > 800 - img.width) {
                x = 800 - img.width
            }

            //draw
            context.clearRect(0, 0, canvas.width, canvas.height)
            context.drawImage(img, x, y)
        },1000/fps)
    }

    __main()









</script>
</body>
</html>